{"ast":null,"code":"import _objectSpread from\"C:/Users/Baap/Desktop/u18/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{Container,Row,Col,Card,Table,Badge,Button,Form,Modal,Dropdown,Alert,Spinner,Tab,Tabs,ProgressBar}from'react-bootstrap';import{toast}from'react-toastify';import axios from'../../utils/axios';import AdminLayout from'../../components/admin/AdminLayout';import LoadingSpinner from'../../components/common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageParticipantsPage=()=>{var _selectedParticipant$;const[participants,setParticipants]=useState([]);const[analytics,setAnalytics]=useState({totalParticipants:0,activeParticipants:0,newThisMonth:0,averageEventsPerParticipant:0,topParticipants:[],departmentStats:[],registrationTrends:[],engagementStats:{}});const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({search:'',department:'',status:'all',sortBy:'createdAt',sortOrder:'desc'});const[pagination,setPagination]=useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:20});const[selectedParticipant,setSelectedParticipant]=useState(null);const[showDetailsModal,setShowDetailsModal]=useState(false);const[activeTab,setActiveTab]=useState('overview');const fetchParticipants=useCallback(async()=>{try{setLoading(true);const queryParams=new URLSearchParams();// Add filters\nif(filters.search.trim())queryParams.append('search',filters.search);if(filters.department)queryParams.append('department',filters.department);if(filters.status!=='all')queryParams.append('isActive',filters.status==='active');queryParams.append('role','participant');queryParams.append('sortBy',filters.sortBy);queryParams.append('sortOrder',filters.sortOrder);queryParams.append('page',pagination.currentPage);queryParams.append('limit',pagination.itemsPerPage);const response=await axios.get(\"/api/users?\".concat(queryParams));setParticipants(response.data.data||[]);setPagination(prev=>{var _response$data$pagina,_response$data$pagina2;return _objectSpread(_objectSpread({},prev),{},{totalPages:((_response$data$pagina=response.data.pagination)===null||_response$data$pagina===void 0?void 0:_response$data$pagina.totalPages)||1,totalItems:((_response$data$pagina2=response.data.pagination)===null||_response$data$pagina2===void 0?void 0:_response$data$pagina2.totalItems)||0});});}catch(error){console.error('Error fetching participants:',error);toast.error('Failed to load participants');}finally{setLoading(false);}},[filters,pagination.currentPage,pagination.itemsPerPage]);useEffect(()=>{fetchParticipants();fetchAnalytics();},[fetchParticipants,fetchAnalytics]);const fetchAnalytics=async()=>{try{const[userStatsRes,registrationStatsRes]=await Promise.allSettled([axios.get('/api/users/stats'),axios.get('/api/registrations/admin/stats')]);if(userStatsRes.status==='fulfilled'){const userStats=userStatsRes.value.data.data;setAnalytics(prev=>{var _userStats$roleStats;return _objectSpread(_objectSpread({},prev),{},{totalParticipants:((_userStats$roleStats=userStats.roleStats)===null||_userStats$roleStats===void 0?void 0:_userStats$roleStats.participant)||0,newThisMonth:userStats.newUsersThisMonth||0,departmentStats:userStats.departmentStats||[]});});}if(registrationStatsRes.status==='fulfilled'){const regStats=registrationStatsRes.value.data.data;setAnalytics(prev=>_objectSpread(_objectSpread({},prev),{},{averageEventsPerParticipant:regStats.averageRegistrationsPerUser||0,topParticipants:regStats.topParticipants||[],registrationTrends:regStats.monthlyTrends||[],engagementStats:regStats.engagementStats||{}}));}}catch(error){console.error('Error fetching analytics:',error);}};const handleFilterChange=(field,value)=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{currentPage:1}));};const handleParticipantAction=async(participant,action)=>{try{switch(action){case'view':setSelectedParticipant(participant);setShowDetailsModal(true);break;case'activate':await axios.put(\"/api/users/\".concat(participant._id),{isActive:true});toast.success('Participant activated successfully');fetchParticipants();break;case'deactivate':await axios.put(\"/api/users/\".concat(participant._id),{isActive:false});toast.success('Participant deactivated successfully');fetchParticipants();break;case'delete':if(window.confirm('Are you sure you want to delete this participant?')){await axios.delete(\"/api/users/\".concat(participant._id));toast.success('Participant deleted successfully');fetchParticipants();}break;default:break;}}catch(error){console.error('Error performing action:',error);toast.error(\"Failed to \".concat(action,\" participant\"));}};const getStatusBadge=isActive=>{return/*#__PURE__*/_jsx(Badge,{bg:isActive?'success':'danger',children:isActive?'Active':'Inactive'});};const getEngagementLevel=registrationCount=>{if(registrationCount>=10)return{level:'High',color:'success'};if(registrationCount>=5)return{level:'Medium',color:'warning'};if(registrationCount>=1)return{level:'Low',color:'info'};return{level:'None',color:'secondary'};};return/*#__PURE__*/_jsxs(AdminLayout,{children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-1\",children:\"Participants Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Manage and analyze participant data\"})]}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:fetchParticipants,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Refresh\"]})]})})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{lg:3,md:6,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm h-100\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary bg-opacity-10 rounded-circle p-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people text-primary\",style:{fontSize:'1.5rem'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"Total Participants\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:analytics.totalParticipants.toLocaleString()})]})]})})})}),/*#__PURE__*/_jsx(Col,{lg:3,md:6,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm h-100\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-success bg-opacity-10 rounded-circle p-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-plus text-success\",style:{fontSize:'1.5rem'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"New This Month\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:analytics.newThisMonth})]})]})})})}),/*#__PURE__*/_jsx(Col,{lg:3,md:6,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm h-100\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-info bg-opacity-10 rounded-circle p-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-event text-info\",style:{fontSize:'1.5rem'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"Avg Events/Participant\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:analytics.averageEventsPerParticipant.toFixed(1)})]})]})})})}),/*#__PURE__*/_jsx(Col,{lg:3,md:6,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm h-100\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-warning bg-opacity-10 rounded-circle p-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-graph-up text-warning\",style:{fontSize:'1.5rem'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"Active Rate\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-0\",children:[analytics.totalParticipants>0?(analytics.activeParticipants/analytics.totalParticipants*100).toFixed(1):0,\"%\"]})]})]})})})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onSelect:k=>setActiveTab(k),className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Tab,{eventKey:\"overview\",title:\"Participants List\",children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Search\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Search participants...\",value:filters.search,onChange:e=>handleFilterChange('search',e.target.value)})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Department\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.department,onChange:e=>handleFilterChange('department',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Departments\"}),analytics.departmentStats.map(dept=>/*#__PURE__*/_jsxs(\"option\",{value:dept._id,children:[dept._id,\" (\",dept.count,\")\"]},dept._id))]})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Status\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.status,onChange:e=>handleFilterChange('status',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Sort By\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.sortBy,onChange:e=>handleFilterChange('sortBy',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"createdAt\",children:\"Join Date\"}),/*#__PURE__*/_jsx(\"option\",{value:\"firstName\",children:\"Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"department\",children:\"Department\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lastLoginAt\",children:\"Last Login\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Order\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.sortOrder,onChange:e=>handleFilterChange('sortOrder',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Descending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Ascending\"})]})]})})]}),/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[\"Showing \",participants.length,\" of \",pagination.totalItems,\" participants\"]})})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})}):participants.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{hover:true,className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Participant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Events\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Engagement\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Joined\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:participants.map(participant=>{var _participant$register,_participant$firstNam,_participant$lastName,_participant$register2;const engagement=getEngagementLevel(((_participant$register=participant.registeredEvents)===null||_participant$register===void 0?void 0:_participant$register.length)||0);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar-sm bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary fw-bold\",children:[(_participant$firstNam=participant.firstName)===null||_participant$firstNam===void 0?void 0:_participant$firstNam.charAt(0),(_participant$lastName=participant.lastName)===null||_participant$lastName===void 0?void 0:_participant$lastName.charAt(0)]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[participant.firstName,\" \",participant.lastName]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:participant.email}),participant.studentId&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[\"ID: \",participant.studentId]})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:participant.department||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:((_participant$register2=participant.registeredEvents)===null||_participant$register2===void 0?void 0:_participant$register2.length)||0}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\" registered\"})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:engagement.color,children:engagement.level})}),/*#__PURE__*/_jsx(\"td\",{children:getStatusBadge(participant.isActive)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(participant.createdAt).toLocaleDateString()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"outline-secondary\",size:\"sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleParticipantAction(participant,'view'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye me-2\"}),\"View Details\"]}),participant.isActive?/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleParticipantAction(participant,'deactivate'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-x me-2\"}),\"Deactivate\"]}):/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleParticipantAction(participant,'activate'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-check me-2\"}),\"Activate\"]}),/*#__PURE__*/_jsx(Dropdown.Divider,{}),/*#__PURE__*/_jsxs(Dropdown.Item,{className:\"text-danger\",onClick:()=>handleParticipantAction(participant,'delete'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash me-2\"}),\"Delete\"]})]})]})})]},participant._id);})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people text-muted\",style:{fontSize:'3rem'}}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3\",children:\"No Participants Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No participants match your current filters.\"})]})]}),/*#__PURE__*/_jsx(Tab,{eventKey:\"analytics\",title:\"Analytics\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm h-100\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Top Participants\"})}),/*#__PURE__*/_jsx(Card.Body,{children:analytics.topParticipants.length>0?analytics.topParticipants.slice(0,10).map((participant,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 me-3\",children:/*#__PURE__*/_jsxs(Badge,{bg:\"primary\",className:\"rounded-pill\",children:[\"#\",index+1]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[participant.firstName,\" \",participant.lastName]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[participant.registrationCount,\" events\"]})]})]},participant._id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No data available\"})})]})}),/*#__PURE__*/_jsx(Col,{lg:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm h-100\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Department Distribution\"})}),/*#__PURE__*/_jsx(Card.Body,{children:analytics.departmentStats.length>0?analytics.departmentStats.map(dept=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-medium\",children:dept._id||'No Department'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:dept.count})]}),/*#__PURE__*/_jsx(ProgressBar,{now:dept.count/analytics.totalParticipants*100,style:{height:'6px'}})]},dept._id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No data available\"})})]})})]})})]})})})})}),/*#__PURE__*/_jsxs(Modal,{show:showDetailsModal,onHide:()=>setShowDetailsModal(false),size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Participant Details\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:selectedParticipant&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",selectedParticipant.firstName,\" \",selectedParticipant.lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",selectedParticipant.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",selectedParticipant.phoneNumber||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Department:\"}),\" \",selectedParticipant.department||'N/A']}),selectedParticipant.studentId&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Student ID:\"}),\" \",selectedParticipant.studentId]})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Activity Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",getStatusBadge(selectedParticipant.isActive)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Joined:\"}),\" \",new Date(selectedParticipant.createdAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Events Registered:\"}),\" \",((_selectedParticipant$=selectedParticipant.registeredEvents)===null||_selectedParticipant$===void 0?void 0:_selectedParticipant$.length)||0]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Login:\"}),\" \",selectedParticipant.lastLoginAt?new Date(selectedParticipant.lastLoginAt).toLocaleDateString():'Never']})]})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDetailsModal(false),children:\"Close\"})})]})]});};export default ManageParticipantsPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Row","Col","Card","Table","Badge","Button","Form","Modal","Dropdown","Alert","Spinner","Tab","Tabs","ProgressBar","toast","axios","AdminLayout","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","ManageParticipantsPage","_selectedParticipant$","participants","setParticipants","analytics","setAnalytics","totalParticipants","activeParticipants","newThisMonth","averageEventsPerParticipant","topParticipants","departmentStats","registrationTrends","engagementStats","loading","setLoading","filters","setFilters","search","department","status","sortBy","sortOrder","pagination","setPagination","currentPage","totalPages","totalItems","itemsPerPage","selectedParticipant","setSelectedParticipant","showDetailsModal","setShowDetailsModal","activeTab","setActiveTab","fetchParticipants","queryParams","URLSearchParams","trim","append","response","get","concat","data","prev","_response$data$pagina","_response$data$pagina2","_objectSpread","error","console","fetchAnalytics","userStatsRes","registrationStatsRes","Promise","allSettled","userStats","value","_userStats$roleStats","roleStats","participant","newUsersThisMonth","regStats","averageRegistrationsPerUser","monthlyTrends","handleFilterChange","field","handleParticipantAction","action","put","_id","isActive","success","window","confirm","delete","getStatusBadge","bg","children","getEngagementLevel","registrationCount","level","color","className","variant","onClick","lg","md","Body","style","fontSize","toLocaleString","toFixed","activeKey","onSelect","k","eventKey","title","Group","Label","Control","type","placeholder","onChange","e","target","Select","map","dept","count","length","animation","hover","_participant$register","_participant$firstNam","_participant$lastName","_participant$register2","engagement","registeredEvents","firstName","charAt","lastName","email","studentId","Date","createdAt","toLocaleDateString","Toggle","size","Menu","Item","Divider","Header","slice","index","now","height","show","onHide","closeButton","Title","phoneNumber","lastLoginAt","Footer"],"sources":["C:/Users/Baap/Desktop/u18/frontend/src/pages/admin/ManageParticipantsPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Container, Row, Col, Card, Table, Badge, Button, Form, \n  Modal, Dropdown, Alert, Spinner, Tab, Tabs, ProgressBar \n} from 'react-bootstrap';\nimport { toast } from 'react-toastify';\nimport axios from '../../utils/axios';\nimport AdminLayout from '../../components/admin/AdminLayout';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\n\nconst ManageParticipantsPage = () => {\n  const [participants, setParticipants] = useState([]);\n  const [analytics, setAnalytics] = useState({\n    totalParticipants: 0,\n    activeParticipants: 0,\n    newThisMonth: 0,\n    averageEventsPerParticipant: 0,\n    topParticipants: [],\n    departmentStats: [],\n    registrationTrends: [],\n    engagementStats: {}\n  });\n  const [loading, setLoading] = useState(true);\n  const [filters, setFilters] = useState({\n    search: '',\n    department: '',\n    status: 'all',\n    sortBy: 'createdAt',\n    sortOrder: 'desc'\n  });\n  const [pagination, setPagination] = useState({\n    currentPage: 1,\n    totalPages: 1,\n    totalItems: 0,\n    itemsPerPage: 20\n  });\n  const [selectedParticipant, setSelectedParticipant] = useState(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n\n  const fetchParticipants = useCallback(async () => {\n    try {\n      setLoading(true);\n      const queryParams = new URLSearchParams();\n      \n      // Add filters\n      if (filters.search.trim()) queryParams.append('search', filters.search);\n      if (filters.department) queryParams.append('department', filters.department);\n      if (filters.status !== 'all') queryParams.append('isActive', filters.status === 'active');\n      queryParams.append('role', 'participant');\n      queryParams.append('sortBy', filters.sortBy);\n      queryParams.append('sortOrder', filters.sortOrder);\n      queryParams.append('page', pagination.currentPage);\n      queryParams.append('limit', pagination.itemsPerPage);\n\n      const response = await axios.get(`/api/users?${queryParams}`);\n      setParticipants(response.data.data || []);\n      setPagination(prev => ({\n        ...prev,\n        totalPages: response.data.pagination?.totalPages || 1,\n        totalItems: response.data.pagination?.totalItems || 0\n      }));\n    } catch (error) {\n      console.error('Error fetching participants:', error);\n      toast.error('Failed to load participants');\n    } finally {\n      setLoading(false);\n    }\n  }, [filters, pagination.currentPage, pagination.itemsPerPage]);\n\n  useEffect(() => {\n    fetchParticipants();\n    fetchAnalytics();\n  }, [fetchParticipants, fetchAnalytics]);\n\n  const fetchAnalytics = async () => {\n    try {\n      const [userStatsRes, registrationStatsRes] = await Promise.allSettled([\n        axios.get('/api/users/stats'),\n        axios.get('/api/registrations/admin/stats')\n      ]);\n\n      if (userStatsRes.status === 'fulfilled') {\n        const userStats = userStatsRes.value.data.data;\n        setAnalytics(prev => ({\n          ...prev,\n          totalParticipants: userStats.roleStats?.participant || 0,\n          newThisMonth: userStats.newUsersThisMonth || 0,\n          departmentStats: userStats.departmentStats || []\n        }));\n      }\n\n      if (registrationStatsRes.status === 'fulfilled') {\n        const regStats = registrationStatsRes.value.data.data;\n        setAnalytics(prev => ({\n          ...prev,\n          averageEventsPerParticipant: regStats.averageRegistrationsPerUser || 0,\n          topParticipants: regStats.topParticipants || [],\n          registrationTrends: regStats.monthlyTrends || [],\n          engagementStats: regStats.engagementStats || {}\n        }));\n      }\n    } catch (error) {\n      console.error('Error fetching analytics:', error);\n    }\n  };\n\n  const handleFilterChange = (field, value) => {\n    setFilters(prev => ({ ...prev, [field]: value }));\n    setPagination(prev => ({ ...prev, currentPage: 1 }));\n  };\n\n  const handleParticipantAction = async (participant, action) => {\n    try {\n      switch (action) {\n        case 'view':\n          setSelectedParticipant(participant);\n          setShowDetailsModal(true);\n          break;\n        case 'activate':\n          await axios.put(`/api/users/${participant._id}`, { isActive: true });\n          toast.success('Participant activated successfully');\n          fetchParticipants();\n          break;\n        case 'deactivate':\n          await axios.put(`/api/users/${participant._id}`, { isActive: false });\n          toast.success('Participant deactivated successfully');\n          fetchParticipants();\n          break;\n        case 'delete':\n          if (window.confirm('Are you sure you want to delete this participant?')) {\n            await axios.delete(`/api/users/${participant._id}`);\n            toast.success('Participant deleted successfully');\n            fetchParticipants();\n          }\n          break;\n        default:\n          break;\n      }\n    } catch (error) {\n      console.error('Error performing action:', error);\n      toast.error(`Failed to ${action} participant`);\n    }\n  };\n\n  const getStatusBadge = (isActive) => {\n    return (\n      <Badge bg={isActive ? 'success' : 'danger'}>\n        {isActive ? 'Active' : 'Inactive'}\n      </Badge>\n    );\n  };\n\n  const getEngagementLevel = (registrationCount) => {\n    if (registrationCount >= 10) return { level: 'High', color: 'success' };\n    if (registrationCount >= 5) return { level: 'Medium', color: 'warning' };\n    if (registrationCount >= 1) return { level: 'Low', color: 'info' };\n    return { level: 'None', color: 'secondary' };\n  };\n\n  return (\n    <AdminLayout>\n      {/* Header */}\n      <Row className=\"mb-4\">\n        <Col>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <div>\n              <h1 className=\"mb-1\">Participants Management</h1>\n              <p className=\"text-muted mb-0\">Manage and analyze participant data</p>\n            </div>\n            <Button variant=\"primary\" onClick={fetchParticipants}>\n              <i className=\"bi bi-arrow-clockwise me-2\"></i>\n              Refresh\n            </Button>\n          </div>\n        </Col>\n      </Row>\n\n      {/* Analytics Overview */}\n      <Row className=\"mb-4\">\n        <Col lg={3} md={6} className=\"mb-3\">\n          <Card className=\"border-0 shadow-sm h-100\">\n            <Card.Body>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"bg-primary bg-opacity-10 rounded-circle p-3\">\n                    <i className=\"bi bi-people text-primary\" style={{ fontSize: '1.5rem' }}></i>\n                  </div>\n                </div>\n                <div className=\"flex-grow-1 ms-3\">\n                  <h6 className=\"text-muted mb-1\">Total Participants</h6>\n                  <h3 className=\"mb-0\">{analytics.totalParticipants.toLocaleString()}</h3>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col lg={3} md={6} className=\"mb-3\">\n          <Card className=\"border-0 shadow-sm h-100\">\n            <Card.Body>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"bg-success bg-opacity-10 rounded-circle p-3\">\n                    <i className=\"bi bi-person-plus text-success\" style={{ fontSize: '1.5rem' }}></i>\n                  </div>\n                </div>\n                <div className=\"flex-grow-1 ms-3\">\n                  <h6 className=\"text-muted mb-1\">New This Month</h6>\n                  <h3 className=\"mb-0\">{analytics.newThisMonth}</h3>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col lg={3} md={6} className=\"mb-3\">\n          <Card className=\"border-0 shadow-sm h-100\">\n            <Card.Body>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"bg-info bg-opacity-10 rounded-circle p-3\">\n                    <i className=\"bi bi-calendar-event text-info\" style={{ fontSize: '1.5rem' }}></i>\n                  </div>\n                </div>\n                <div className=\"flex-grow-1 ms-3\">\n                  <h6 className=\"text-muted mb-1\">Avg Events/Participant</h6>\n                  <h3 className=\"mb-0\">{analytics.averageEventsPerParticipant.toFixed(1)}</h3>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col lg={3} md={6} className=\"mb-3\">\n          <Card className=\"border-0 shadow-sm h-100\">\n            <Card.Body>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"bg-warning bg-opacity-10 rounded-circle p-3\">\n                    <i className=\"bi bi-graph-up text-warning\" style={{ fontSize: '1.5rem' }}></i>\n                  </div>\n                </div>\n                <div className=\"flex-grow-1 ms-3\">\n                  <h6 className=\"text-muted mb-1\">Active Rate</h6>\n                  <h3 className=\"mb-0\">\n                    {analytics.totalParticipants > 0 \n                      ? ((analytics.activeParticipants / analytics.totalParticipants) * 100).toFixed(1)\n                      : 0}%\n                  </h3>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n\n      {/* Main Content Tabs */}\n      <Row>\n        <Col>\n          <Card className=\"border-0 shadow-sm\">\n            <Card.Body>\n              <Tabs\n                activeKey={activeTab}\n                onSelect={(k) => setActiveTab(k)}\n                className=\"mb-4\"\n              >\n                <Tab eventKey=\"overview\" title=\"Participants List\">\n                  {/* Filters */}\n                  <Row className=\"mb-4\">\n                    <Col md={3}>\n                      <Form.Group>\n                        <Form.Label>Search</Form.Label>\n                        <Form.Control\n                          type=\"text\"\n                          placeholder=\"Search participants...\"\n                          value={filters.search}\n                          onChange={(e) => handleFilterChange('search', e.target.value)}\n                        />\n                      </Form.Group>\n                    </Col>\n                    <Col md={2}>\n                      <Form.Group>\n                        <Form.Label>Department</Form.Label>\n                        <Form.Select\n                          value={filters.department}\n                          onChange={(e) => handleFilterChange('department', e.target.value)}\n                        >\n                          <option value=\"\">All Departments</option>\n                          {analytics.departmentStats.map(dept => (\n                            <option key={dept._id} value={dept._id}>\n                              {dept._id} ({dept.count})\n                            </option>\n                          ))}\n                        </Form.Select>\n                      </Form.Group>\n                    </Col>\n                    <Col md={2}>\n                      <Form.Group>\n                        <Form.Label>Status</Form.Label>\n                        <Form.Select\n                          value={filters.status}\n                          onChange={(e) => handleFilterChange('status', e.target.value)}\n                        >\n                          <option value=\"all\">All Status</option>\n                          <option value=\"active\">Active</option>\n                          <option value=\"inactive\">Inactive</option>\n                        </Form.Select>\n                      </Form.Group>\n                    </Col>\n                    <Col md={2}>\n                      <Form.Group>\n                        <Form.Label>Sort By</Form.Label>\n                        <Form.Select\n                          value={filters.sortBy}\n                          onChange={(e) => handleFilterChange('sortBy', e.target.value)}\n                        >\n                          <option value=\"createdAt\">Join Date</option>\n                          <option value=\"firstName\">Name</option>\n                          <option value=\"department\">Department</option>\n                          <option value=\"lastLoginAt\">Last Login</option>\n                        </Form.Select>\n                      </Form.Group>\n                    </Col>\n                    <Col md={2}>\n                      <Form.Group>\n                        <Form.Label>Order</Form.Label>\n                        <Form.Select\n                          value={filters.sortOrder}\n                          onChange={(e) => handleFilterChange('sortOrder', e.target.value)}\n                        >\n                          <option value=\"desc\">Descending</option>\n                          <option value=\"asc\">Ascending</option>\n                        </Form.Select>\n                      </Form.Group>\n                    </Col>\n                  </Row>\n\n                  {/* Results Summary */}\n                  <Row className=\"mb-3\">\n                    <Col>\n                      <p className=\"text-muted\">\n                        Showing {participants.length} of {pagination.totalItems} participants\n                      </p>\n                    </Col>\n                  </Row>\n\n                  {/* Participants Table */}\n                  {loading ? (\n                    <div className=\"text-center py-4\">\n                      <Spinner animation=\"border\" />\n                    </div>\n                  ) : participants.length > 0 ? (\n                    <div className=\"table-responsive\">\n                      <Table hover className=\"mb-0\">\n                        <thead className=\"table-light\">\n                          <tr>\n                            <th>Participant</th>\n                            <th>Department</th>\n                            <th>Events</th>\n                            <th>Engagement</th>\n                            <th>Status</th>\n                            <th>Joined</th>\n                            <th>Actions</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {participants.map(participant => {\n                            const engagement = getEngagementLevel(participant.registeredEvents?.length || 0);\n                            return (\n                              <tr key={participant._id}>\n                                <td>\n                                  <div className=\"d-flex align-items-center\">\n                                    <div className=\"avatar-sm bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3\">\n                                      <span className=\"text-primary fw-bold\">\n                                        {participant.firstName?.charAt(0)}{participant.lastName?.charAt(0)}\n                                      </span>\n                                    </div>\n                                    <div>\n                                      <h6 className=\"mb-0\">{participant.firstName} {participant.lastName}</h6>\n                                      <small className=\"text-muted\">{participant.email}</small>\n                                      {participant.studentId && (\n                                        <small className=\"text-muted d-block\">ID: {participant.studentId}</small>\n                                      )}\n                                    </div>\n                                  </div>\n                                </td>\n                                <td>{participant.department || 'N/A'}</td>\n                                <td>\n                                  <span className=\"fw-bold\">{participant.registeredEvents?.length || 0}</span>\n                                  <small className=\"text-muted\"> registered</small>\n                                </td>\n                                <td>\n                                  <Badge bg={engagement.color}>{engagement.level}</Badge>\n                                </td>\n                                <td>{getStatusBadge(participant.isActive)}</td>\n                                <td>\n                                  <small className=\"text-muted\">\n                                    {new Date(participant.createdAt).toLocaleDateString()}\n                                  </small>\n                                </td>\n                                <td>\n                                  <Dropdown>\n                                    <Dropdown.Toggle variant=\"outline-secondary\" size=\"sm\">\n                                      <i className=\"bi bi-three-dots\"></i>\n                                    </Dropdown.Toggle>\n                                    <Dropdown.Menu>\n                                      <Dropdown.Item onClick={() => handleParticipantAction(participant, 'view')}>\n                                        <i className=\"bi bi-eye me-2\"></i>View Details\n                                      </Dropdown.Item>\n                                      {participant.isActive ? (\n                                        <Dropdown.Item onClick={() => handleParticipantAction(participant, 'deactivate')}>\n                                          <i className=\"bi bi-person-x me-2\"></i>Deactivate\n                                        </Dropdown.Item>\n                                      ) : (\n                                        <Dropdown.Item onClick={() => handleParticipantAction(participant, 'activate')}>\n                                          <i className=\"bi bi-person-check me-2\"></i>Activate\n                                        </Dropdown.Item>\n                                      )}\n                                      <Dropdown.Divider />\n                                      <Dropdown.Item \n                                        className=\"text-danger\"\n                                        onClick={() => handleParticipantAction(participant, 'delete')}\n                                      >\n                                        <i className=\"bi bi-trash me-2\"></i>Delete\n                                      </Dropdown.Item>\n                                    </Dropdown.Menu>\n                                  </Dropdown>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </Table>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-5\">\n                      <i className=\"bi bi-people text-muted\" style={{ fontSize: '3rem' }}></i>\n                      <h4 className=\"mt-3\">No Participants Found</h4>\n                      <p className=\"text-muted\">No participants match your current filters.</p>\n                    </div>\n                  )}\n                </Tab>\n\n                <Tab eventKey=\"analytics\" title=\"Analytics\">\n                  <Row>\n                    <Col lg={6} className=\"mb-4\">\n                      <Card className=\"border-0 shadow-sm h-100\">\n                        <Card.Header className=\"bg-white border-0 py-3\">\n                          <h6 className=\"mb-0\">Top Participants</h6>\n                        </Card.Header>\n                        <Card.Body>\n                          {analytics.topParticipants.length > 0 ? (\n                            analytics.topParticipants.slice(0, 10).map((participant, index) => (\n                              <div key={participant._id} className=\"d-flex align-items-center mb-3\">\n                                <div className=\"flex-shrink-0 me-3\">\n                                  <Badge bg=\"primary\" className=\"rounded-pill\">#{index + 1}</Badge>\n                                </div>\n                                <div className=\"flex-grow-1\">\n                                  <h6 className=\"mb-0\">{participant.firstName} {participant.lastName}</h6>\n                                  <small className=\"text-muted\">{participant.registrationCount} events</small>\n                                </div>\n                              </div>\n                            ))\n                          ) : (\n                            <p className=\"text-muted\">No data available</p>\n                          )}\n                        </Card.Body>\n                      </Card>\n                    </Col>\n                    <Col lg={6} className=\"mb-4\">\n                      <Card className=\"border-0 shadow-sm h-100\">\n                        <Card.Header className=\"bg-white border-0 py-3\">\n                          <h6 className=\"mb-0\">Department Distribution</h6>\n                        </Card.Header>\n                        <Card.Body>\n                          {analytics.departmentStats.length > 0 ? (\n                            analytics.departmentStats.map(dept => (\n                              <div key={dept._id} className=\"mb-3\">\n                                <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                                  <span className=\"fw-medium\">{dept._id || 'No Department'}</span>\n                                  <span className=\"text-muted\">{dept.count}</span>\n                                </div>\n                                <ProgressBar \n                                  now={(dept.count / analytics.totalParticipants) * 100} \n                                  style={{ height: '6px' }}\n                                />\n                              </div>\n                            ))\n                          ) : (\n                            <p className=\"text-muted\">No data available</p>\n                          )}\n                        </Card.Body>\n                      </Card>\n                    </Col>\n                  </Row>\n                </Tab>\n              </Tabs>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n\n      {/* Participant Details Modal */}\n      <Modal show={showDetailsModal} onHide={() => setShowDetailsModal(false)} size=\"lg\">\n        <Modal.Header closeButton>\n          <Modal.Title>Participant Details</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {selectedParticipant && (\n            <Row>\n              <Col md={6}>\n                <h6>Personal Information</h6>\n                <p><strong>Name:</strong> {selectedParticipant.firstName} {selectedParticipant.lastName}</p>\n                <p><strong>Email:</strong> {selectedParticipant.email}</p>\n                <p><strong>Phone:</strong> {selectedParticipant.phoneNumber || 'N/A'}</p>\n                <p><strong>Department:</strong> {selectedParticipant.department || 'N/A'}</p>\n                {selectedParticipant.studentId && (\n                  <p><strong>Student ID:</strong> {selectedParticipant.studentId}</p>\n                )}\n              </Col>\n              <Col md={6}>\n                <h6>Activity Information</h6>\n                <p><strong>Status:</strong> {getStatusBadge(selectedParticipant.isActive)}</p>\n                <p><strong>Joined:</strong> {new Date(selectedParticipant.createdAt).toLocaleDateString()}</p>\n                <p><strong>Events Registered:</strong> {selectedParticipant.registeredEvents?.length || 0}</p>\n                <p><strong>Last Login:</strong> {selectedParticipant.lastLoginAt ? new Date(selectedParticipant.lastLoginAt).toLocaleDateString() : 'Never'}</p>\n              </Col>\n            </Row>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowDetailsModal(false)}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </AdminLayout>\n  );\n};\n\nexport default ManageParticipantsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}