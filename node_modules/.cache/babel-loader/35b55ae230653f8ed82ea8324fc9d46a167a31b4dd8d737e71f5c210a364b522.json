{"ast":null,"code":"import _objectSpread from\"C:/Users/Baap/Desktop/campus-event-management/campus-event-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Row,Col,Card,Form,Button,Alert,Table,Badge,Modal,Spinner}from'react-bootstrap';import{toast}from'react-toastify';import axios from'../../utils/axios';import LoadingSpinner from'../../components/common/LoadingSpinner';import AdminLayout from'../../components/admin/AdminLayout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SystemSettingsPage=()=>{const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[settings,setSettings]=useState({siteName:'Campus Events',siteDescription:'Campus Event Management System',contactEmail:'admin@campus.edu',maxEventsPerUser:10,defaultEventCapacity:100,allowPublicRegistration:true,requireEmailVerification:true,autoApproveEvents:false,notificationSettings:{emailNotifications:true,smsNotifications:false,pushNotifications:true}});const[systemInfo,setSystemInfo]=useState({});const[showBackupModal,setShowBackupModal]=useState(false);useEffect(()=>{fetchSystemSettings();fetchSystemInfo();},[]);const fetchSystemSettings=async()=>{try{// This would be a real API call in production\n// const response = await axios.get('/api/admin/settings');\n// setSettings(response.data.data);\n// For now, using default settings\nsetLoading(false);}catch(error){console.error('Error fetching settings:',error);toast.error('Failed to load system settings');setLoading(false);}};const fetchSystemInfo=async()=>{try{const response=await axios.get('/api/health');setSystemInfo(response.data);}catch(error){console.error('Error fetching system info:',error);}};const handleSettingChange=(field,value)=>{if(field.includes('.')){const[parent,child]=field.split('.');setSettings(prev=>_objectSpread(_objectSpread({},prev),{},{[parent]:_objectSpread(_objectSpread({},prev[parent]),{},{[child]:value})}));}else{setSettings(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));}};const handleSaveSettings=async()=>{try{setSaving(true);// await axios.put('/api/admin/settings', settings);\ntoast.success('Settings saved successfully');}catch(error){console.error('Error saving settings:',error);toast.error('Failed to save settings');}finally{setSaving(false);}};const handleBackupDatabase=async()=>{try{toast.info('Database backup initiated...');// await axios.post('/api/admin/backup');\ntoast.success('Database backup completed');setShowBackupModal(false);}catch(error){console.error('Error creating backup:',error);toast.error('Failed to create backup');}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(AdminLayout,{children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-1\",children:\"System Settings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:\"Configure system-wide settings and preferences\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-warning\",onClick:()=>setShowBackupModal(true),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download me-2\"}),\"Backup Database\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:handleSaveSettings,disabled:saving,children:[saving?/*#__PURE__*/_jsx(Spinner,{size:\"sm\",className:\"me-2\"}):/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle me-2\"}),\"Save Settings\"]})]})]})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{lg:8,children:[/*#__PURE__*/_jsxs(Card,{className:\"mb-4 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"General Settings\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Site Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:settings.siteName,onChange:e=>handleSettingChange('siteName',e.target.value)})]}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Contact Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:settings.contactEmail,onChange:e=>handleSettingChange('contactEmail',e.target.value)})]}),/*#__PURE__*/_jsxs(Col,{md:12,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Site Description\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:settings.siteDescription,onChange:e=>handleSettingChange('siteDescription',e.target.value)})]})]})})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Event Settings\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Max Events Per User\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"1\",max:\"100\",value:settings.maxEventsPerUser,onChange:e=>handleSettingChange('maxEventsPerUser',parseInt(e.target.value))})]}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Default Event Capacity\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"1\",value:settings.defaultEventCapacity,onChange:e=>handleSettingChange('defaultEventCapacity',parseInt(e.target.value))})]}),/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"auto-approve-events\",label:\"Auto-approve new events\",checked:settings.autoApproveEvents,onChange:e=>handleSettingChange('autoApproveEvents',e.target.checked),className:\"mb-3\"})})]})})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"User Settings\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"public-registration\",label:\"Allow public registration\",checked:settings.allowPublicRegistration,onChange:e=>handleSettingChange('allowPublicRegistration',e.target.checked),className:\"mb-3\"}),/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"email-verification\",label:\"Require email verification\",checked:settings.requireEmailVerification,onChange:e=>handleSettingChange('requireEmailVerification',e.target.checked),className:\"mb-3\"})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Notification Settings\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"email-notifications\",label:\"Email notifications\",checked:settings.notificationSettings.emailNotifications,onChange:e=>handleSettingChange('notificationSettings.emailNotifications',e.target.checked),className:\"mb-3\"}),/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"sms-notifications\",label:\"SMS notifications\",checked:settings.notificationSettings.smsNotifications,onChange:e=>handleSettingChange('notificationSettings.smsNotifications',e.target.checked),className:\"mb-3\"}),/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",id:\"push-notifications\",label:\"Push notifications\",checked:settings.notificationSettings.pushNotifications,onChange:e=>handleSettingChange('notificationSettings.pushNotifications',e.target.checked),className:\"mb-3\"})]})]})]}),/*#__PURE__*/_jsxs(Col,{lg:4,children:[/*#__PURE__*/_jsxs(Card,{className:\"mb-4 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"System Information\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Table,{borderless:true,className:\"mb-0\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-muted\",children:\"Status\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:systemInfo.status||'OK'})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-muted\",children:\"Environment\"}),/*#__PURE__*/_jsx(\"td\",{children:systemInfo.environment||'development'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-muted\",children:\"Uptime\"}),/*#__PURE__*/_jsx(\"td\",{children:systemInfo.uptime?\"\".concat(Math.floor(systemInfo.uptime/3600),\"h\"):'N/A'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-muted\",children:\"Last Updated\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:systemInfo.timestamp?new Date(systemInfo.timestamp).toLocaleString():'N/A'})})]})]})})})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 py-3\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Quick Actions\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-clockwise me-2\"}),\"Clear Cache\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-warning\",size:\"sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-file-earmark-text me-2\"}),\"View Logs\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-info\",size:\"sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-gear me-2\"}),\"System Maintenance\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>setShowBackupModal(true),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download me-2\"}),\"Database Backup\"]})]})})]})]})]}),/*#__PURE__*/_jsxs(Modal,{show:showBackupModal,onHide:()=>setShowBackupModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Database Backup\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"This will create a backup of the entire database. This process may take several minutes.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to proceed with the database backup?\"})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowBackupModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{variant:\"warning\",onClick:handleBackupDatabase,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-download me-2\"}),\"Create Backup\"]})]})]})]});};export default SystemSettingsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}