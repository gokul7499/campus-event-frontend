{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[],requiredPermissions=[]}=_ref;const{user,loading}=useAuth();const location=useLocation();// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{fullScreen:true,text:\"Checking authentication...\"});}// Redirect to login if not authenticated\nif(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Check role-based access\nif(allowedRoles.length>0&&!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-exclamation text-warning\",style:{fontSize:'3rem'}}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"You don't have permission to access this page.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.history.back(),children:\"Go Back\"})]})})})})});}// Check permission-based access\nif(requiredPermissions.length>0){const hasAllPermissions=requiredPermissions.every(permission=>{var _user$permissions;return(_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.includes(permission);});if(!hasAllPermissions){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-exclamation text-warning\",style:{fontSize:'3rem'}}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3\",children:\"Insufficient Permissions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"You don't have the required permissions to access this page.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.history.back(),children:\"Go Back\"})]})})})})});}}// Render children if all checks pass\nreturn children;};export default ProtectedRoute;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}