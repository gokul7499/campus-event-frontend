{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Baap\\\\Desktop\\\\campus-event-management\\\\campus-event-frontend\\\\src\\\\context\\\\SocketContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport { useAuth } from './AuthContext';\nimport config from '../config/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = /*#__PURE__*/createContext();\nexport const SocketProvider = ({\n  children\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    if (user) {\n      const newSocket = io(config.socket.url, {\n        auth: {\n          userId: user._id\n        }\n      });\n\n      // Connection event handlers\n      newSocket.on('connect', () => {\n        console.log('Socket connected:', newSocket.id);\n        setConnected(true);\n\n        // Join user's personal room\n        newSocket.emit('join', user._id);\n      });\n      newSocket.on('disconnect', () => {\n        console.log('Socket disconnected');\n        setConnected(false);\n      });\n      newSocket.on('connect_error', error => {\n        console.error('Socket connection error:', error);\n        setConnected(false);\n      });\n      setSocket(newSocket);\n      return () => {\n        newSocket.close();\n        setSocket(null);\n        setConnected(false);\n      };\n    } else {\n      if (socket) {\n        socket.close();\n        setSocket(null);\n        setConnected(false);\n      }\n    }\n  }, [user, socket]);\n\n  // Send notification\n  const sendNotification = data => {\n    if (socket && connected) {\n      socket.emit('send_notification', data);\n    }\n  };\n\n  // Send event update\n  const sendEventUpdate = data => {\n    if (socket && connected) {\n      socket.emit('event_update', data);\n    }\n  };\n\n  // Subscribe to notifications\n  const onNotification = callback => {\n    if (socket) {\n      socket.on('notification', callback);\n\n      // Return cleanup function\n      return () => socket.off('notification', callback);\n    }\n  };\n\n  // Subscribe to event updates\n  const onEventUpdate = callback => {\n    if (socket) {\n      socket.on('event_updated', callback);\n\n      // Return cleanup function\n      return () => socket.off('event_updated', callback);\n    }\n  };\n\n  // Subscribe to real-time registration updates\n  const onRegistrationUpdate = callback => {\n    if (socket) {\n      socket.on('registration_update', callback);\n\n      // Return cleanup function\n      return () => socket.off('registration_update', callback);\n    }\n  };\n\n  // Join event room (for real-time updates during events)\n  const joinEventRoom = eventId => {\n    if (socket && connected) {\n      socket.emit('join_event', eventId);\n    }\n  };\n\n  // Leave event room\n  const leaveEventRoom = eventId => {\n    if (socket && connected) {\n      socket.emit('leave_event', eventId);\n    }\n  };\n\n  // Send message to event room\n  const sendEventMessage = (eventId, message) => {\n    if (socket && connected) {\n      socket.emit('event_message', {\n        eventId,\n        message\n      });\n    }\n  };\n\n  // Subscribe to event messages\n  const onEventMessage = callback => {\n    if (socket) {\n      socket.on('event_message', callback);\n\n      // Return cleanup function\n      return () => socket.off('event_message', callback);\n    }\n  };\n  const value = {\n    socket,\n    connected,\n    sendNotification,\n    sendEventUpdate,\n    onNotification,\n    onEventUpdate,\n    onRegistrationUpdate,\n    joinEventRoom,\n    leaveEventRoom,\n    sendEventMessage,\n    onEventMessage\n  };\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n_s(SocketProvider, \"OKPP+mnOeJfwAAivly0/xMlqf4U=\", false, function () {\n  return [useAuth];\n});\n_c = SocketProvider;\nexport const useSocket = () => {\n  _s2();\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error('useSocket must be used within a SocketProvider');\n  }\n  return context;\n};\n_s2(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default SocketContext;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","io","useAuth","config","jsxDEV","_jsxDEV","SocketContext","SocketProvider","children","_s","socket","setSocket","connected","setConnected","user","newSocket","url","auth","userId","_id","on","console","log","id","emit","error","close","sendNotification","data","sendEventUpdate","onNotification","callback","off","onEventUpdate","onRegistrationUpdate","joinEventRoom","eventId","leaveEventRoom","sendEventMessage","message","onEventMessage","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useSocket","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/Baap/Desktop/campus-event-management/campus-event-frontend/src/context/SocketContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { useAuth } from './AuthContext';\r\nimport config from '../config/config';\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [connected, setConnected] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      \r\n      const newSocket = io(config.socket.url, {\r\n        auth: {\r\n          userId: user._id\r\n        }\r\n      });\r\n\r\n      // Connection event handlers\r\n      newSocket.on('connect', () => {\r\n        console.log('Socket connected:', newSocket.id);\r\n        setConnected(true);\r\n        \r\n        // Join user's personal room\r\n        newSocket.emit('join', user._id);\r\n      });\r\n\r\n      newSocket.on('disconnect', () => {\r\n        console.log('Socket disconnected');\r\n        setConnected(false);\r\n      });\r\n\r\n      newSocket.on('connect_error', (error) => {\r\n        console.error('Socket connection error:', error);\r\n        setConnected(false);\r\n      });\r\n\r\n      setSocket(newSocket);\r\n\r\n      return () => {\r\n        newSocket.close();\r\n        setSocket(null);\r\n        setConnected(false);\r\n      };\r\n    } else {\r\n      \r\n      if (socket) {\r\n        socket.close();\r\n        setSocket(null);\r\n        setConnected(false);\r\n      }\r\n    }\r\n  }, [user, socket]);\r\n\r\n  // Send notification\r\n  const sendNotification = (data) => {\r\n    if (socket && connected) {\r\n      socket.emit('send_notification', data);\r\n    }\r\n  };\r\n\r\n  // Send event update\r\n  const sendEventUpdate = (data) => {\r\n    if (socket && connected) {\r\n      socket.emit('event_update', data);\r\n    }\r\n  };\r\n\r\n  // Subscribe to notifications\r\n  const onNotification = (callback) => {\r\n    if (socket) {\r\n      socket.on('notification', callback);\r\n      \r\n      // Return cleanup function\r\n      return () => socket.off('notification', callback);\r\n    }\r\n  };\r\n\r\n  // Subscribe to event updates\r\n  const onEventUpdate = (callback) => {\r\n    if (socket) {\r\n      socket.on('event_updated', callback);\r\n      \r\n      // Return cleanup function\r\n      return () => socket.off('event_updated', callback);\r\n    }\r\n  };\r\n\r\n  // Subscribe to real-time registration updates\r\n  const onRegistrationUpdate = (callback) => {\r\n    if (socket) {\r\n      socket.on('registration_update', callback);\r\n      \r\n      // Return cleanup function\r\n      return () => socket.off('registration_update', callback);\r\n    }\r\n  };\r\n\r\n  // Join event room (for real-time updates during events)\r\n  const joinEventRoom = (eventId) => {\r\n    if (socket && connected) {\r\n      socket.emit('join_event', eventId);\r\n    }\r\n  };\r\n\r\n  // Leave event room\r\n  const leaveEventRoom = (eventId) => {\r\n    if (socket && connected) {\r\n      socket.emit('leave_event', eventId);\r\n    }\r\n  };\r\n\r\n  // Send message to event room\r\n  const sendEventMessage = (eventId, message) => {\r\n    if (socket && connected) {\r\n      socket.emit('event_message', { eventId, message });\r\n    }\r\n  };\r\n\r\n  // Subscribe to event messages\r\n  const onEventMessage = (callback) => {\r\n    if (socket) {\r\n      socket.on('event_message', callback);\r\n      \r\n      // Return cleanup function\r\n      return () => socket.off('event_message', callback);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    socket,\r\n    connected,\r\n    sendNotification,\r\n    sendEventUpdate,\r\n    onNotification,\r\n    onEventUpdate,\r\n    onRegistrationUpdate,\r\n    joinEventRoom,\r\n    leaveEventRoom,\r\n    sendEventMessage,\r\n    onEventMessage\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSocket = () => {\r\n  const context = useContext(SocketContext);\r\n  if (!context) {\r\n    throw new Error('useSocket must be used within a SocketProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default SocketContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}