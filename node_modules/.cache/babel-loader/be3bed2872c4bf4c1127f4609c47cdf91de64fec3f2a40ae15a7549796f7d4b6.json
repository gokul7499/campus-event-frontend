{"ast":null,"code":"import axios from'axios';import config from'../config/config';// Create axios instance with base configuration\nconst axiosInstance=axios.create({baseURL:config.api.baseURL,timeout:config.api.timeout,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\naxiosInstance.interceptors.request.use(config=>{var _config$method;// Debug logging\nconsole.log('üöÄ API Request:',{method:(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),url:config.url,baseURL:config.baseURL,fullURL:\"\".concat(config.baseURL).concat(config.url)});const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);console.log('üîë Token added to request');}return config;},error=>{console.error('‚ùå Request interceptor error:',error);return Promise.reject(error);});// Response interceptor to handle errors\naxiosInstance.interceptors.response.use(response=>{console.log('‚úÖ API Response:',{status:response.status,url:response.config.url,data:response.data});return response;},error=>{var _error$response,_error$config,_error$config2,_error$response2;console.error('‚ùå API Error:',{status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,message:error.message,url:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url,baseURL:(_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.baseURL,fullURL:error.config?\"\".concat(error.config.baseURL).concat(error.config.url):'Unknown'});// Only handle 401 errors for non-auth endpoints\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401&&!error.config.url.includes('/api/auth/')){// Token expired or invalid for protected routes\nlocalStorage.removeItem('token');// Don't redirect immediately, let the component handle it\nconsole.warn('Token expired, please login again');}return Promise.reject(error);});export default axiosInstance;","map":{"version":3,"names":["axios","config","axiosInstance","create","baseURL","api","timeout","headers","interceptors","request","use","_config$method","console","log","method","toUpperCase","url","fullURL","concat","token","localStorage","getItem","Authorization","error","Promise","reject","response","status","data","_error$response","_error$config","_error$config2","_error$response2","message","includes","removeItem","warn"],"sources":["C:/Users/Baap/Desktop/u18/frontend/src/utils/axios.js"],"sourcesContent":["import axios from 'axios';\nimport config from '../config/config';\n\n// Create axios instance with base configuration\nconst axiosInstance = axios.create({\n  baseURL: config.api.baseURL,\n  timeout: config.api.timeout,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\naxiosInstance.interceptors.request.use(\n  (config) => {\n    // Debug logging\n    console.log('üöÄ API Request:', {\n      method: config.method?.toUpperCase(),\n      url: config.url,\n      baseURL: config.baseURL,\n      fullURL: `${config.baseURL}${config.url}`\n    });\n\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log('üîë Token added to request');\n    }\n    return config;\n  },\n  (error) => {\n    console.error('‚ùå Request interceptor error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\naxiosInstance.interceptors.response.use(\n  (response) => {\n    console.log('‚úÖ API Response:', {\n      status: response.status,\n      url: response.config.url,\n      data: response.data\n    });\n    return response;\n  },\n  (error) => {\n    console.error('‚ùå API Error:', {\n      status: error.response?.status,\n      message: error.message,\n      url: error.config?.url,\n      baseURL: error.config?.baseURL,\n      fullURL: error.config ? `${error.config.baseURL}${error.config.url}` : 'Unknown'\n    });\n\n    // Only handle 401 errors for non-auth endpoints\n    if (error.response?.status === 401 && !error.config.url.includes('/api/auth/')) {\n      // Token expired or invalid for protected routes\n      localStorage.removeItem('token');\n      // Don't redirect immediately, let the component handle it\n      console.warn('Token expired, please login again');\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}